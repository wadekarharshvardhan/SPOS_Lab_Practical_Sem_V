//Chit No. 7 — SPPU — LP-I

//Write a program to simulate CPU Scheduling Algorithm: Priority

import java.util.*;

class Process {
    int pid, arrivalTime, burstTime, priority, startTime, finishTime;

    Process(int pid, int arrivalTime, int burstTime, int priority) {
        this.pid = pid;
        this.arrivalTime = arrivalTime;
        this.burstTime = burstTime;
        this.priority = priority;
    }
}

public class PriorityScheduling {
    public static void main(String[] args) {
        List<Process> processes = new ArrayList<>();
        processes.add(new Process(1, 0, 5, 2));
        processes.add(new Process(2, 1, 3, 1));
        processes.add(new Process(3, 2, 8, 4));
        processes.add(new Process(4, 3, 6, 3));

        int clock = 0;
        List<Process> completed = new ArrayList<>();
        PriorityQueue<Process> pq = new PriorityQueue<>(
            Comparator.comparingInt((Process p) -> p.priority).thenComparingInt(p -> p.arrivalTime));

        while (!processes.isEmpty() || !pq.isEmpty()) {
            for (Iterator<Process> it = processes.iterator(); it.hasNext(); ) {
                Process p = it.next();
                if (p.arrivalTime <= clock) {
                    pq.offer(p);
                    it.remove();
                }
            }
            if (!pq.isEmpty()) {
                Process current = pq.poll();
                current.startTime = clock;
                clock += current.burstTime;
                current.finishTime = clock;
                completed.add(current);
            } else {
                clock++;
            }
        }

        for (Process p : completed) {
            System.out.println("Process " + p.pid + ": Start = " + p.startTime + ", Finish = " + p.finishTime + ", Priority = " + p.priority);
        }
    }
}
